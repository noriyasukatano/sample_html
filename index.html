<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">

    <head>

    <title>Twitter test</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>

    </head>

    <body>

    <h1>Twitter test</h1>

    <hr />

    <div class="container">
          <div class="row">
            <div id="messageView">
        </div>
          </div>
    </div>

    <script type="text/javascript">

     var ioSocket = io.connect("http://localhost:3000/");

     ioSocket.on("disconnect", function() {});

     ioSocket.on("twitter_message", function(data) {
         appendMessage(data.name, data.text)
     });

     function appendMessage(name, text) {
        $("#messageView").append(
              "<div class=\"panel panel-default\">" +
            "<div class=\"panel-heading\">" +
              "<h3 class=\"panel-title\">" + name + "</h3>" +
            "</div>" +
                "<div class=\"panel-body\">" +
                  text +
            "</div>" +
          "</div>");
     }

    </script>

    </body>

</html>
